---
import Layout from '../layouts/Layout.astro';
---

<Layout>
  <style>
    .stats-page { max-width: 1200px; margin: 0 auto; padding-bottom: 40px; }
    .stats-header { display:flex; align-items:center; justify-content:space-between; gap:16px }
    .stats-title { margin:0; font-size:24px; font-weight:700; }
    .viewer-hint { margin: 8px 0 0; color: #6b7280; font-size: 13px; }

    .controls { display:flex; gap:12px; align-items:center }
    #user-select { padding:10px 12px; border-radius:10px; border:1px solid #e6e9ef; background:#fff; font-size:14px; min-width:260px }

    .project-summary { margin-top:18px; display:flex; gap:18px; align-items:center }
    .project-card { flex:1; background:#fff; padding:18px; border-radius:12px; box-shadow:0 8px 30px rgba(17,16,29,0.04) }
    .progress-bar { height:14px; background:#eef2ff; border-radius:10px; overflow:hidden }
    .progress-fill { height:100%; background:linear-gradient(90deg,#10b981,#34d399); width:0%; transition:width 400ms ease }

    .people-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:12px; margin-top:18px }
    .person-card { background:#fff; padding:12px; border-radius:10px; box-shadow:0 6px 20px rgba(17,16,29,0.03); display:flex; gap:12px; align-items:center }
    .avatar { width:48px; height:48px; border-radius:8px; background:#e6eefc; display:inline-flex; align-items:center; justify-content:center; color:#0ea5a4; font-weight:700 }
    .person-meta { flex:1 }
    .person-name { font-weight:700; font-size:14px; }
    .person-role { font-size:12px; color:#6b7280 }
    .person-stats { display:flex; gap:8px; margin-top:8px; font-size:13px; color:#374151 }

    .overdue-table { width: 100%; border-collapse: collapse; margin-top: 18px; }
    .overdue-table th, .overdue-table td { text-align: left; padding: 10px 8px; border-bottom: 1px solid #f3f4f6; font-size: 13px; }
    .overdue-table th { color: #374151; font-weight: 600; }
    .muted { color: #6b7280; font-size: 13px; }
    .empty { padding: 22px; text-align: center; color: #9ca3af; }
  </style>

  <div class="stats-page">
    <div class="stats-header">
      <div>
        <h1 class="stats-title">Project Stats</h1>
        <p class="viewer-hint muted">Overview of people and project metrics. Select a person to filter the view.</p>
      </div>
      <div class="controls">
        <label style="display:flex;flex-direction:column;font-size:12px;color:#6b7280">
          <span style="font-size:12px;margin-bottom:6px">Person</span>
          <select id="user-select">
            <option value="__all">All people</option>
          </select>
        </label>
      </div>
    </div>

    <div id="stats-root">
      <!-- script will render cards + table here -->
      <div class="empty">Loading statsâ€¦</div>
    </div>

    <div id="people-root"></div>
  </div>

  <script type="module" src="/src/scripts/stats.js" client:load></script>
</Layout>
